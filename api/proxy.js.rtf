{\rtf1\ansi\ansicpg932\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red109\green115\blue120;\red23\green24\blue24;\red202\green202\blue202;
\red183\green111\blue247;\red212\green212\blue212;\red113\green192\blue131;\red246\green124\blue48;\red54\green192\blue160;
}
{\*\expandedcolortbl;;\cssrgb\c50196\c52549\c54510;\cssrgb\c11765\c12157\c12549;\cssrgb\c83137\c83137\c83137;
\cssrgb\c77255\c54118\c97647;\cssrgb\c86275\c86275\c86275;\cssrgb\c50588\c78824\c58431;\cssrgb\c98039\c56471\c24314;\cssrgb\c23922\c78824\c69020;
}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 // api/proxy.js\cf4 \cb1 \strokec4 \
\
\cf2 \cb3 \strokec2 // Vercel\uc0\u29872 \u22659 \u12391 \u21205 \u20316 \u12377 \u12427 \u12469 \u12540 \u12496 \u12540 \u12524 \u12473 \u38306 \u25968 \u12392 \u12375 \u12390 \u12456 \u12463 \u12473 \u12509 \u12540 \u12488 \cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5 export\cf4 \strokec4  \cf5 \strokec5 default\cf4 \strokec4  \cf5 \strokec5 async\cf4 \strokec4  \cf5 \strokec5 function\cf4 \strokec4  handler\cf6 \strokec6 (\cf4 \strokec4 request\cf6 \strokec6 ,\cf4 \strokec4  response\cf6 \strokec6 )\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3   \cf2 \strokec2 // \uc0\u12501 \u12525 \u12531 \u12488 \u12456 \u12531 \u12489 \u12363 \u12425 \u12398 POST\u12522 \u12463 \u12456 \u12473 \u12488 \u20197 \u22806 \u12399 \u25298 \u21542 \cf4 \cb1 \strokec4 \
\cb3   \cf5 \strokec5 if\cf4 \strokec4  \cf6 \strokec6 (\cf4 \strokec4 request\cf6 \strokec6 .\cf4 \strokec4 method \cf6 \strokec6 !==\cf4 \strokec4  \cf7 \strokec7 'POST'\cf6 \strokec6 )\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3     \cf5 \strokec5 return\cf4 \strokec4  response\cf6 \strokec6 .\cf4 \strokec4 status\cf6 \strokec6 (\cf8 \strokec8 405\cf6 \strokec6 ).\cf4 \strokec4 json\cf6 \strokec6 (\{\cf4 \strokec4  message\cf6 \strokec6 :\cf4 \strokec4  \cf7 \strokec7 'Method Not Allowed'\cf4 \strokec4  \cf6 \strokec6 \});\cf4 \cb1 \strokec4 \
\cb3   \cf6 \strokec6 \}\cf4 \cb1 \strokec4 \
\
\cb3   \cf5 \strokec5 try\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 // Vercel\uc0\u12398 \u29872 \u22659 \u22793 \u25968 \u12363 \u12425 API\u12461 \u12540 \u12434 \u23433 \u20840 \u12395 \u21462 \u24471 \cf4 \cb1 \strokec4 \
\cb3     \cf5 \strokec5 const\cf4 \strokec4  apiKey \cf6 \strokec6 =\cf4 \strokec4  process\cf6 \strokec6 .\cf4 \strokec4 env\cf6 \strokec6 .\cf9 \strokec9 GEMINI_API_KEY\cf6 \strokec6 ;\cf4 \cb1 \strokec4 \
\
\cb3     \cf5 \strokec5 if\cf4 \strokec4  \cf6 \strokec6 (!\cf4 \strokec4 apiKey\cf6 \strokec6 )\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3       \cf5 \strokec5 throw\cf4 \strokec4  \cf5 \strokec5 new\cf4 \strokec4  \cf9 \strokec9 Error\cf6 \strokec6 (\cf7 \strokec7 'API\uc0\u12461 \u12540 \u12364 Vercel\u12398 \u29872 \u22659 \u22793 \u25968 \u12395 \u35373 \u23450 \u12373 \u12428 \u12390 \u12356 \u12414 \u12379 \u12435 \u12290 '\cf6 \strokec6 );\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 \}\cf4 \cb1 \strokec4 \
\
\cb3     \cf5 \strokec5 const\cf4 \strokec4  model \cf6 \strokec6 =\cf4 \strokec4  \cf7 \strokec7 'gemini-2.0-flash'\cf6 \strokec6 ;\cf4 \cb1 \strokec4 \
\cb3     \cf5 \strokec5 const\cf4 \strokec4  url \cf6 \strokec6 =\cf4 \strokec4  \cf7 \strokec7 `https://generativelanguage.googleapis.com/v1beta/models/\cf6 \strokec6 $\{\cf4 \strokec4 model\cf6 \strokec6 \}\cf7 \strokec7 :generateContent?key=\cf6 \strokec6 $\{\cf4 \strokec4 apiKey\cf6 \strokec6 \}\cf7 \strokec7 `\cf6 \strokec6 ;\cf4 \cb1 \strokec4 \
\
\cb3     \cf2 \strokec2 // \uc0\u12501 \u12525 \u12531 \u12488 \u12456 \u12531 \u12489 \u12363 \u12425 \u36865 \u12425 \u12428 \u12390 \u12365 \u12383 \u12522 \u12463 \u12456 \u12473 \u12488 \u12398 \u26412 \u25991 \u12434 \u21462 \u24471 \cf4 \cb1 \strokec4 \
\cb3     \cf5 \strokec5 const\cf4 \strokec4  requestBody \cf6 \strokec6 =\cf4 \strokec4  request\cf6 \strokec6 .\cf4 \strokec4 body\cf6 \strokec6 ;\cf4 \cb1 \strokec4 \
\
\cb3     \cf2 \strokec2 // Gemini API\uc0\u12395 \u12522 \u12463 \u12456 \u12473 \u12488 \u12434 \u36578 \u36865 \cf4 \cb1 \strokec4 \
\cb3     \cf5 \strokec5 const\cf4 \strokec4  geminiResponse \cf6 \strokec6 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  fetch\cf6 \strokec6 (\cf4 \strokec4 url\cf6 \strokec6 ,\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3       method\cf6 \strokec6 :\cf4 \strokec4  \cf7 \strokec7 'POST'\cf6 \strokec6 ,\cf4 \cb1 \strokec4 \
\cb3       headers\cf6 \strokec6 :\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3         \cf7 \strokec7 'Content-Type'\cf6 \strokec6 :\cf4 \strokec4  \cf7 \strokec7 'application/json'\cf6 \strokec6 ,\cf4 \cb1 \strokec4 \
\cb3       \cf6 \strokec6 \},\cf4 \cb1 \strokec4 \
\cb3       body\cf6 \strokec6 :\cf4 \strokec4  \cf9 \strokec9 JSON\cf6 \strokec6 .\cf4 \strokec4 stringify\cf6 \strokec6 (\cf4 \strokec4 requestBody\cf6 \strokec6 ),\cf4 \strokec4  \cf2 \strokec2 // \uc0\u12501 \u12525 \u12531 \u12488 \u12456 \u12531 \u12489 \u12363 \u12425 \u12398 \u12522 \u12463 \u12456 \u12473 \u12488 \u26412 \u25991 \u12434 \u12381 \u12398 \u12414 \u12414 \u20351 \u29992 \cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 \});\cf4 \cb1 \strokec4 \
\
\cb3     \cf2 \strokec2 // Gemini API\uc0\u12363 \u12425 \u12398 \u12524 \u12473 \u12509 \u12531 \u12473 \u12434 \u35299 \u26512 \cf4 \cb1 \strokec4 \
\cb3     \cf5 \strokec5 const\cf4 \strokec4  geminiData \cf6 \strokec6 =\cf4 \strokec4  \cf5 \strokec5 await\cf4 \strokec4  geminiResponse\cf6 \strokec6 .\cf4 \strokec4 json\cf6 \strokec6 ();\cf4 \cb1 \strokec4 \
\
\cb3     \cf5 \strokec5 if\cf4 \strokec4  \cf6 \strokec6 (!\cf4 \strokec4 geminiResponse\cf6 \strokec6 .\cf4 \strokec4 ok\cf6 \strokec6 )\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3         \cf2 \strokec2 // \uc0\u12456 \u12521 \u12540 \u12524 \u12473 \u12509 \u12531 \u12473 \u12434 \u12381 \u12398 \u12414 \u12414 \u12501 \u12525 \u12531 \u12488 \u12456 \u12531 \u12489 \u12395 \u36820 \u12377 \cf4 \cb1 \strokec4 \
\cb3         \cf5 \strokec5 return\cf4 \strokec4  response\cf6 \strokec6 .\cf4 \strokec4 status\cf6 \strokec6 (\cf4 \strokec4 geminiResponse\cf6 \strokec6 .\cf4 \strokec4 status\cf6 \strokec6 ).\cf4 \strokec4 json\cf6 \strokec6 (\cf4 \strokec4 geminiData\cf6 \strokec6 );\cf4 \cb1 \strokec4 \
\cb3     \cf6 \strokec6 \}\cf4 \cb1 \strokec4 \
\
\cb3     \cf2 \strokec2 // \uc0\u25104 \u21151 \u12375 \u12383 \u12524 \u12473 \u12509 \u12531 \u12473 \u12434 \u12501 \u12525 \u12531 \u12488 \u12456 \u12531 \u12489 \u12395 \u36820 \u12377 \cf4 \cb1 \strokec4 \
\cb3     response\cf6 \strokec6 .\cf4 \strokec4 status\cf6 \strokec6 (\cf8 \strokec8 200\cf6 \strokec6 ).\cf4 \strokec4 json\cf6 \strokec6 (\cf4 \strokec4 geminiData\cf6 \strokec6 );\cf4 \cb1 \strokec4 \
\
\cb3   \cf6 \strokec6 \}\cf4 \strokec4  \cf5 \strokec5 catch\cf4 \strokec4  \cf6 \strokec6 (\cf4 \strokec4 error\cf6 \strokec6 )\cf4 \strokec4  \cf6 \strokec6 \{\cf4 \cb1 \strokec4 \
\cb3     console\cf6 \strokec6 .\cf4 \strokec4 error\cf6 \strokec6 (\cf7 \strokec7 '\uc0\u12503 \u12525 \u12461 \u12471 \u12456 \u12521 \u12540 :'\cf6 \strokec6 ,\cf4 \strokec4  error\cf6 \strokec6 );\cf4 \cb1 \strokec4 \
\cb3     response\cf6 \strokec6 .\cf4 \strokec4 status\cf6 \strokec6 (\cf8 \strokec8 500\cf6 \strokec6 ).\cf4 \strokec4 json\cf6 \strokec6 (\{\cf4 \strokec4  message\cf6 \strokec6 :\cf4 \strokec4  \cf7 \strokec7 '\uc0\u12469 \u12540 \u12496 \u12540 \u20869 \u37096 \u12391 \u12456 \u12521 \u12540 \u12364 \u30330 \u29983 \u12375 \u12414 \u12375 \u12383 \u12290 '\cf6 \strokec6 ,\cf4 \strokec4  error\cf6 \strokec6 :\cf4 \strokec4  error\cf6 \strokec6 .\cf4 \strokec4 message \cf6 \strokec6 \});\cf4 \cb1 \strokec4 \
\cb3   \cf6 \strokec6 \}\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 \}\cf4 \cb1 \strokec4 \
\
}